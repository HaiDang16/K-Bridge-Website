@page
@model K_Bridge.Pages.Admin.Forums.Topics.Post.PreviewModel
@{
    ViewData["Title"] = "Duyệt bài viết";
    <link href="/css/Newest.css" rel="stylesheet" />
    bool isCmtAvaiable = true;
}

<div class="row account-navigate mt-3 px-5 align-items-center ">
    <div class="col-6 d-flex justify-content-star">
        <img src="/img/icon_dashboard_50_dark.png"
             onclick="window.location.href='/Admin/Dashboard'"
             class="account-navigate-icon mt-2 custom-cursor-pointer" alt="Tổng quan">
        <img src="/img/icon_arrow_right_50_dark.png" class="mx-4 mt-2 py-1"
             alt="Tổng quan" width="10" height="20">
        <div class="account-navigate-text custom-cursor-pointer"
             onclick="window.location.href='/Admin/Forums'">
            Lập trình
        </div>
        <img src="/img/icon_arrow_right_50_dark.png" class="mx-4 mt-2 py-1"
             alt="Tổng quan" width="10" height="20">
        <div class="account-navigate-text custom-cursor-pointer "
             onclick="window.location.href='/Admin/Forums/Topics'">
            Bài viết
        </div>
        <img src="/img/icon_arrow_right_50_dark.png" class="mx-4 mt-2 py-1"
             alt="Tổng quan" width="10" height="20">
        <div class="account-navigate-text custom-cursor-pointer "
             onclick="window.location.href='/Admin/Forums/Topics/Post'">
            Bài viết 12144
        </div>
    </div>
    <div class="col-9">
    </div>
</div>
<div class="row mt-3 px-5">
    <p class="account-title pb-3" style="border-bottom: 3px solid #8E6745">Bài viết 12344</p>
</div>
<div class="container-fluid">
    <div class="row main-content mt-4 mx-3">
        <div class="col-lg-9 col-md-8 col-12 content mb-4 ">
            <div class="pb-3">
                <div class="d-flex justify-content-start fs-4">
                    Làm sao để đổi mật khẩu email sinh viên sau khi đăng ký môn học đăng ký môn học?
                </div>
                <div class="d-flex justify-content-between align-items-center" style="border-bottom: 1px solid #493422">
                    <div class="m-0 p-0 d-flex justify-content-between">
                        <div class="py-2 me-2">Câu trả lời</div>
                        <div class="py-2 ms-2">Lượt xem</div>
                    </div>
                    <div class="newest-card-tag px-5 mx-3 ">Tài liệu</div>
                </div>
                <div class="row m-0 p-0 mt-3 ">
                    <div class="col-lg-1 flex-column">
                       
                    </div>
                    <div class="col-lg-11">
                        <div>
                            <p>
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Non diam phasellus vestibulum lorem sed risus ultricies. Vitae proin sagittis nisl rhoncus mattis rhoncus urna neque viverra. Ut sem nulla pharetra diam sit. Curabitur vitae nunc sed velit dignissim. Blandit cursus risus at ultrices mi tempus imperdiet. Aliquet porttitor lacus luctus accumsan tortor posuere. In cursus turpis massa tincidunt dui ut ornare lectus. Ac odio tempor orci dapibus ultrices in iaculis nunc. Augue ut lectus arcu bibendum at varius vel pharetra. Nunc eget lorem dolor sed viverra ipsum nunc aliquet bibendum. Viverra mauris in aliquam sem fringilla. Orci phasellus egestas tellus rutrum tellus pellentesque eu tincidunt tortor. Sed libero enim sed faucibus turpis in. Est lorem ipsum dolor sit. Mollis nunc sed id semper risus. Sed turpis tincidunt id aliquet risus.
                                <br />
                                Vitae ultricies leo integer malesuada nunc vel risus commodo viverra. Convallis aenean et tortor at risus viverra. Penatibus et magnis dis parturient montes nascetur ridiculus mus mauris. Sapien faucibus et molestie ac feugiat sed lectus. Id venenatis a condimentum vitae sapien pellentesque. Ultrices neque ornare aenean euismod. Neque vitae tempus quam pellentesque nec. Leo a diam sollicitudin tempor id eu. In tellus integer feugiat scelerisque varius. Vitae elementum curabitur vitae nunc sed velit dignissim. Enim sed faucibus turpis in eu mi bibendum neque. Mollis aliquam ut porttitor leo a. Nisi scelerisque eu ultrices vitae auctor. Massa tincidunt nunc pulvinar sapien et ligula ullamcorper. Placerat vestibulum lectus mauris ultrices.
                                <br />
                                <br />
                                Ultrices in iaculis nunc sed augue lacus. Natoque penatibus et magnis dis parturient montes nascetur ridiculus. Lacus vel facilisis volutpat est velit egestas dui id. Donec massa sapien faucibus et. Feugiat scelerisque varius morbi enim nunc faucibus. Interdum velit euismod in pellentesque. Imperdiet proin fermentum leo vel. Dolor sit amet consectetur adipiscing elit duis tristique. Felis donec et odio pellentesque. Mattis molestie a iaculis at erat pellentesque adipiscing commodo elit. Dui nunc mattis enim ut tellus elementum sagittis vitae et. Eleifend donec pretium vulputate sapien nec. Porttitor rhoncus dolor purus non enim. Et netus et malesuada fames ac turpis egestas maecenas. Interdum posuere lorem ipsum dolor sit amet consectetur adipiscing. Pellentesque elit eget gravida cum sociis natoque penatibus et magnis. Tortor dignissim convallis aenean et tortor at risus viverra adipiscing. Dolor purus non enim praesent. Magna etiam tempor orci eu lobortis elementum nibh tellus.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <div class="col-lg-3 col-md-12">
            <div class="text-center">
                <img class="rounded-circle" src="~/img/user.jpg" alt="User" height="150" width="150"/>
            </div>
            <div class="d-flex text-color-header mt-5">
                <div class="col-7 text-uppercase ">
                    <p>Tên đăng nhập:</p>
                    <p>Đã tham gia:</p>
                    <p>Bài viết đã đăng:</p>
                </div>
                <div class="col-5">
                    <p>Test 1</p>
                    <p>12 ngày</p>
                    <p>124 bài viết</p>
                </div>
            </div>
            <select style="width: 100%;" class="text-uppercase mb-3 fw-bold px-2 py-2" style="border: 2px solid #8E6745; color: #493422; background-color: #FFF0E6;">
                <option selected>Chưa phê duyệt</option>
                <option value="approved" style="color: #FFF0E6; background-color: #00D462;" class="py-3">Phê duyệt</option>
                <option value="rejected" style="color: #FFF0E6; background-color: #FF4141;" class="py-3">Từ chối</option>
            </select>
            <div style="max-width: 300px;" class="mt-2 justify-content-end">
                <button type="button" style="color: #FFF0E6; background-color: #493422;"
                    class="p-2 text-uppercase rounded-3 fs-6 w-100">
                    Xác nhận
                </button>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const boldBtn = document.getElementById('bold-btn');
        const italicBtn = document.getElementById('italic-btn');
        const underlineBtn = document.getElementById('underline-btn');
        const undoBtn = document.getElementById('undo-btn');
        const redoBtn = document.getElementById('redo-btn');
        const contentArea = document.getElementById('content-area');

        let undoStack = [''];
        let redoStack = [];

        function applyStyle(style) {
            const start = contentArea.selectionStart;
            const end = contentArea.selectionEnd;
            const selectedText = contentArea.value.substring(start, end);
            let replacement = '';

            switch (style) {
                case 'bold':
                    replacement = `<strong>${selectedText}</strong>`;
                    break;
                case 'italic':
                    replacement = `<em>${selectedText}</em>`;
                    break;
                case 'underline':
                    replacement = `<u>${selectedText}</u>`;
                    break;
            }

            contentArea.value = contentArea.value.substring(0, start) + replacement + contentArea.value.substring(end);

            this.classList.toggle('active');
            saveState();
        }

        function saveState() {
            undoStack.push(contentArea.value);
            redoStack = [];
        }

        function updateButtonStates() {
            const selection = window.getSelection();
            if (selection.rangeCount > 0) {
                const range = selection.getRangeAt(0);
                const span = document.createElement('span');
                range.surroundContents(span);

                boldBtn.classList.toggle('active', span.querySelector('strong'));
                italicBtn.classList.toggle('active', span.querySelector('em'));
                underlineBtn.classList.toggle('active', span.querySelector('u'));

                range.extractContents();
                range.insertNode(span.firstChild);
            }
        }

        function debounce(func, delay) {
            let timeoutId;
            return function () {
                const context = this;
                const args = arguments;
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(context, args), delay);
            };
        }

        const debouncedUpdateButtonStates = debounce(updateButtonStates, 250);

        boldBtn.addEventListener('click', function () { applyStyle.call(this, 'bold'); });
        italicBtn.addEventListener('click', function () { applyStyle.call(this, 'italic'); });
        underlineBtn.addEventListener('click', function () { applyStyle.call(this, 'underline'); });

        undoBtn.addEventListener('click', function () {
            if (undoStack.length > 1) {
                redoStack.push(undoStack.pop());
                contentArea.value = undoStack[undoStack.length - 1];
            }
        });

        redoBtn.addEventListener('click', function () {
            if (redoStack.length > 0) {
                undoStack.push(redoStack.pop());
                contentArea.value = undoStack[undoStack.length - 1];
            }
        });

        contentArea.addEventListener('input', saveState);
        contentArea.addEventListener('mouseup', debouncedUpdateButtonStates);
        contentArea.addEventListener('keyup', debouncedUpdateButtonStates);
    });
</script>
